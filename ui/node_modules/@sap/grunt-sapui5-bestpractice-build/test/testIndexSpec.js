var expect = require('chai').expect;
var path = require('path');
var fs = require('fs');
var grunt = require('grunt');
var rewire = require('rewire');
var mock = require('mock-fs');
var indexPrivate = rewire('../tasks/index');

describe('different build tasks', function () {

    var getComponentParent = indexPrivate.__get__('getComponentParent');

    it('Component.js under project root - getComponentParent return . ', function () {
        mock({
            'projectRoot': {
                'Component.js': "var a;"
            }
        });
        var result = getComponentParent('projectRoot', 'projectRoot');
        expect(result).to.equal('.');
    })

    it('Component.js under inner folder - getComponentParent return parent folder', function () {
        mock({
            'projectRoot': {
                'component.js': "var a;",
                'webapp' : {
                    'main' : {
                        'Component.js': "var a;"
                    }
                }
            }
        });
        var result = getComponentParent('projectRoot', 'projectRoot');
        expect(result).to.equal(path.join('webapp', 'main'));
    })

    it('Component.js under inner node_modules folder - getComponentParent return null', function () {
        mock({
            'projectRoot': {
                'component.js': "var a;",
                'node_modules' : {
                    'Component.js': "var a;"
                }
            }
        });
        var result = getComponentParent('projectRoot', 'projectRoot');
        expect(result).to.equal(null);
    })




});